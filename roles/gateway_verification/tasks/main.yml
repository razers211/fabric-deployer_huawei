---
- name: Verify BGP routes from fabric
  huawei.vrp.vrp_command:
    commands: "display bgp routing-table"
  register: bgp_routes

- name: Verify external connectivity
  huawei.vrp.vrp_command:
    commands: "ping 8.8.8.8"
  register: external_ping
  failed_when: "'success' not in external_ping.stdout"

- name: Verify EVPN routes
  huawei.vrp.vrp_command:
    commands: "display bgp evpn routing-table"
  register: evpn_routes

- name: Display gateway verification results
  debug:
    msg: "Gateway verification completed successfully"
